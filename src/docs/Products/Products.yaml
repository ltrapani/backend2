paths:
  /api/products:
    get:
      summary: Gets all paginated products
      tags:
        - Products
      responses:
        "200":
          description: The products were successfully obtained from the database
          content:
            appplication/json:
              schema:
                $ref: "#components/schemas/Pagination"
        "500":
          description: Internal server error, generated by a faulty query or connection failure to the database
    post:
      summary: Add a product from its pid
      tags:
        - Products
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#components/requestBodies/postProduct"
      responses:
        "200":
          description: The product was successfully added to the database
        "400":
          description: Error, incomplete values or the product has already been registered
          content:
            appplication/json:
              schema:
                oneOf:
                  - $ref: "#components/responseBodies/postProductIncompleteValues"
                  - $ref: "#components/responseBodies/postProductCodeAlreadyExists"
        "500":
          description: Internal server error, generated by a faulty query or connection failure to the database
  /api/products/mocking-products:
    get:
      summary: Gets 100 products generated by the faker-js library.
      tags:
        - Products
      responses:
        "200":
          description: The products were obtained satisfactorily
          content:
            appplication/json:
              schema:
                type: array
                items:
                  $ref: "#components/schemas/Product"
        "500":
          description: Internal server error, generated by a faulty query or connection failure to the database
  /api/products/{pid}:
    get:
      summary: Gets a single product from its pid
      tags:
        - Products
      parameters:
        - name: pid
          in: path
          required: true
          description: The product id
          schema:
            $type: String
      responses:
        "200":
          description: The product was successfully obtained from the database
          content:
            appplication/json:
              schema:
                $ref: "#components/schemas/Product"
        "500":
          description: Internal server error, generated by a faulty query or connection failure to the database
    put:
      summary: Update the product from its pid
      tags:
        - Products
      parameters:
        - name: pid
          in: path
          required: true
          description: The product id
          schema:
            $type: String
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#components/requestBodies/updateProduct"
      responses:
        "200":
          description: The product was successfully updated in the database
        "400":
          description: Invalid id
        "404":
          description: Product not found
        "500":
          description: Internal server error, generated by a faulty query or connection failure to the database
    delete:
      summary: Delete the product from its pid
      tags:
        - Products
      parameters:
        - name: pid
          in: path
          required: true
          description: The product id
          schema:
            $type: String
      responses:
        "200":
          description: The product was successfully removed from the database
        "400":
          description: Invalid id
        "403":
          description: You don't have permissions
        "404":
          description: Product not found
        "500":
          description: Internal server error, generated by a faulty query or connection failure to the database
components:
  schemas:
    Pagination:
      type: object
      properties:
        totalDocs:
          type: Number
          description: Total documents
        limit:
          type: Number
          description: Limit query to paginate products
        totalPages:
          type: Number
          description: Total of pages
        page:
          type: Number
          description: Actual page
        pagingCounter:
          type: Number
          description: Counter
        hasPrevPage:
          type: Boolean
          description: Flag previous page
        hasNextPage:
          type: Number
          description: Flag next page
        prevPage:
          type: Boolean
          description: Number of previous page
        nextPage:
          type: Number
          description: Number of next page
        status:
          type: String
          description: Status of response
        prevLink:
          type: String
          description: Link to previous page
        nextLink:
          type: String
          description: Link to next page
        payload:
          type: Array
          description: Array of products
          items:
            $ref: "#components/schemas/Product"
      example:
        totalDocs": 20
        limit: 3
        totalPages: 7
        page: 1
        pagingCounter: 1
        hasPrevPage: false
        hasNextPage: true
        prevPage: null
        nextPage: 2
        status: success
        prevLink: null
        nextLink: http://localhost:8080/products?limit=3&page=2
        payload:
          [
            {
              "_id": "6418385b16ffae70c2891a49",
              "title": "Elegant Wooden Gloves",
              "price": 407,
              "description": "New range of formal shirts are designed keeping you in mind. With fits and styling that will make you stand apart",
              "code": "a111",
              "status": true,
              "stock": 0,
              "thumbnail":
                [
                  "https://api.lorem.space/image/furniture?w=640&h=480&r=5233",
                  "https://api.lorem.space/image/furniture?w=640&h=480&r=2958",
                  "https://api.lorem.space/image/furniture?w=640&h=480&r=9180",
                ],
              "category": "Furniture",
              "owner": "admin",
            },
            {
              "_id": "6418385b16ffae70c2891a4a",
              "title": "Recycled Concrete Computer",
              "price": 461,
              "description": "The automobile layout consists of a front-engine design, with transaxle-type transmissions mounted at the rear of the engine and four wheel drive",
              "code": "a112",
              "status": true,
              "stock": 7,
              "thumbnail":
                [
                  "https://api.lorem.space/image?w=640&h=480&r=5113",
                  "https://api.lorem.space/image?w=640&h=480&r=1115",
                  "https://api.lorem.space/image?w=640&h=480&r=6042",
                ],
              "category": "Others",
              "owner": "admin",
            },
          ]
    Product:
      type: object
      properties:
        _id:
          type: ObjectId
          description: Mongodb autogenerated id
        title:
          type: String
          description: Product name
        description:
          type: String
          description: Product description
        code:
          type: String
          description: Product code
        price:
          type: Number
          description: Price of the product
        status:
          type: String
          description: Product status
        stock:
          type: String
          description: Available stock of the product
        category:
          type: String
          description: Product category
        thumbnail:
          type: Array
          description: Product Image URLs
        owner:
          type: String
          description: Email of the user who created the product
      example:
        _id: 6418385b16ffae70c2891a49
        title: Elegant Wooden Gloves
        price: 407
        description: New range of formal shirts are designed keeping you in mind.
        code: a111
        status: true
        stock: 3
        thumbnail: ["https://some-url.com", "https://some-url2.com"]
        category: Furniture
        owner: admin
  requestBodies:
    updateProduct:
      type: object
      properties:
        title:
          type: String
          description: Product name
        description:
          type: String
          description: Product description
        code:
          type: String
          description: Product code
        price:
          type: Number
          description: Price of the product
        status:
          type: String
          description: Product status
        stock:
          type: String
          description: Available stock of the product
        category:
          type: String
          description: Product category
        thumbnail:
          type: Array
          description: Product Image URLs
        owner:
          type: String
          description: Email of the user who created the product
      example:
        title: Elegant Wooden Gloves
        price: 407
        description: New range of formal shirts are designed keeping you in mind.
        code: a111
        status: true
        stock: 3
        thumbnail: ["https://some-url.com", "https://some-url2.com"]
        category: Furniture
    postProduct:
      type: object
      properties:
        title:
          type: String
          description: Product name
        description:
          type: String
          description: Product description
        code:
          type: String
          description: Product code
        price:
          type: Number
          description: Price of the product
        status:
          type: String
          description: Product status
        stock:
          type: String
          description: Available stock of the product
        category:
          type: String
          description: Product category
        thumbnail:
          type: Array
          description: Product Image URLs
        owner:
          type: String
          description: Email of the user who created the product
      example:
        title: Elegant Wooden Gloves
        price: 407
        description: New range of formal shirts are designed keeping you in mind.
        code: a111
        status: true
        stock: 3
        thumbnail: ["https://some-url.com", "https://some-url2.com"]
        category: Furniture
  responseBodies:
    postProductIncompleteValues:
      type: object
      properties:
        status:
          type: String
          description: Request status
        error:
          type: String
          description: Error message
      example:
        status: error
        error: Incomplete values
    postProductCodeAlreadyExists:
      type: object
      properties:
        status:
          type: String
          description: Request status
        error:
          type: String
          description: Error message
      example:
        status: error
        error: Product already exists
